<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>æ—…éŠè³‡æ–™æ”¶é›†ç°¿</title>

<style>
body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;background:#f4f5f7;padding:16px;}
h1{text-align:center;}
.tab{display:inline-block;padding:6px 12px;margin:4px;border-radius:20px;background:#e0e0e0;cursor:pointer;}
.tab.active{background:#4CAF50;color:#fff;}
.card{background:#fff;border-radius:12px;padding:16px;margin-bottom:16px;box-shadow:0 2px 6px rgba(0,0,0,.08);}
label{font-weight:bold;display:block;margin-top:10px;}
input,select,textarea{width:100%;padding:8px;margin-top:4px;border-radius:6px;border:1px solid #ccc;}
button{margin-top:10px;padding:10px;width:100%;border:none;border-radius:8px;background:#4CAF50;color:#fff;font-size:16px;}
.item{border-bottom:1px dashed #ddd;padding:8px 0;font-size:14px;}
.tag{background:#e0f2f1;padding:2px 6px;border-radius:6px;margin-right:4px;font-size:12px;}
.small{font-size:12px;color:#666;}
</style>
</head>

<body>

<h1>ğŸŒ æ—…éŠè³‡æ–™æ”¶é›†ç°¿</h1>

<div style="text-align:center">
  <span class="tab active" onclick="filterTab('all')">å…¨éƒ¨</span>
  <span class="tab" onclick="filterTab('åœ‹å…§')">åœ‹å…§</span>
  <span class="tab" onclick="filterTab('åœ‹å¤–')">åœ‹å¤–</span>
  <span class="tab" onclick="filterTab('æ˜¯')">å·²åˆ°è¨ª</span>
  <span class="tab" onclick="filterTab('å¦')">æœªåˆ°è¨ª</span>
</div>

<div class="card">
  <label>åœ°å€é¡å‹</label>
  <select id="area">
    <option>åœ‹å…§</option>
    <option>åœ‹å¤–</option>
  </select>

  <label>åœ‹å®¶ / ç¸£å¸‚é„‰é®</label>
  <input id="place" placeholder="ä¾‹å¦‚ï¼šå®œè˜­å—æ¾³ / æ—¥æœ¬é•·é‡">

  <label>æ¨™é¡Œ</label>
  <input id="title">

  <label>è³‡æ–™å…§å®¹</label>
  <textarea id="content" rows="3"></textarea>

  <label>åƒè€ƒç¶²å€ï¼ˆå¯å¤šå€‹ï¼‰</label>
  <textarea id="links" rows="2"></textarea>

  <label>é—œéµå­—ï¼ˆé€—è™Ÿåˆ†éš”ï¼‰</label>
  <input id="tags">

  <label>æ˜¯å¦å·²åˆ°è¨ª</label>
  <select id="visited">
    <option>å¦</option>
    <option>æ˜¯</option>
  </select>

  <label>åˆ°è¨ªæ—¥æœŸ</label>
  <input type="date" id="date">

  <label>éŠè¨˜å¿ƒå¾—</label>
  <textarea id="note" rows="3"></textarea>

  <button onclick="save()">ğŸ’¾ å„²å­˜</button>
</div>

<div class="card">
  <label>ğŸ” æœå°‹</label>
  <input id="search" oninput="load()">
</div>

<div class="card">
  <h2>ğŸ“š æˆ‘çš„æ—…éŠè³‡æ–™</h2>
  <div id="list"></div>
</div>

<script>
let currentTab="all";

function filterTab(tab){
  currentTab=tab;
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
  event.target.classList.add('active');
  load();
}

function save(){
  const data={
    area:area.value,
    place:place.value,
    title:title.value,
    content:content.value,
    links:links.value,
    tags:tags.value,
    visited:visited.value,
    date:date.value,
    note:note.value
  };
  localStorage.setItem("travel-"+Date.now(),JSON.stringify(data));
  alert("å·²å„²å­˜");
  load();
}

function load(){
  list.innerHTML="";
  const q=search.value||"";
  for(let k in localStorage){
    if(k.startsWith("travel-")){
      const d=JSON.parse(localStorage[k]);
      if(currentTab!=="all"){
        if(d.area!==currentTab && d.visited!==currentTab) continue;
      }
      if(JSON.stringify(d).includes(q)){
        const mapLink=`https://www.google.com/maps/search/${encodeURIComponent(d.place)}`;
        list.innerHTML+=`
        <div class="item">
          <strong>${d.title}</strong><br>
          <span class="small">${d.area}ï½œ${d.place}</span><br>
          ${d.tags.split(",").map(t=>`<span class="tag">${t}</span>`).join("")}
          ${d.visited==="æ˜¯"?"âœ” å·²åˆ°è¨ª":""}
          <div class="small">
            <a href="${mapLink}" target="_blank">ğŸ“ åœ°åœ–</a>
          </div>
        </div>`;
      }
    }
  }
}
load();
</script>

</body>
</html>
